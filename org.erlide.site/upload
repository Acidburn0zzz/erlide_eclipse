SOURCE=$1
DESTINATION=$2
USER=$3

q=

expect - << END
	# exp_internal 1 # uncomment for debugging
		
	spawn sftp ${USER}@frs.sourceforge.net
	expect "*sftp>"
	send "rm frs/${DESTINATION}/features/*\r"
	expect "*sftp>"
	send "rm frs/${DESTINATION}/plugins/*\r"
	expect "*sftp>"
	send "rm frs/${DESTINATION}/*\r"
	expect "*sftp>"
	send "bye\r"
	wait
END

scp $q -C ${SOURCE}/artifacts.* ${USER}@frs.sourceforge.net:frs/${DESTINATION}
scp $q -C ${SOURCE}/content.* ${USER}@frs.sourceforge.net:frs/${DESTINATION}
scp $q -C -r ${SOURCE}/features ${USER}@frs.sourceforge.net:frs/${DESTINATION}
scp $q -C -r ${SOURCE}/plugins ${USER}@frs.sourceforge.net:frs/${DESTINATION}


