SOURCE=$1
DESTINATION=$2
USER=$3

expect - << END
	# exp_internal 1 # uncomment for debugging
		
	spawn sftp ${USER}@frs.sourceforge.net
	expect "*sftp>"
	send "rm frs/${DESTINATION}/features/*\r"
	expect "*sftp>"
	send "rm frs/${DESTINATION}/plugins/*\r"
	expect "*sftp>"
	send "rm frs/${DESTINATION}/*\r"
	expect "*sftp>"
	send "bye\r"
	wait
		
	spawn scp -q -C -r ${SOURCE}/content.jar ${USER}@frs.sourceforge.net:frs/${DESTINATION}
	expect eof
	wait
	spawn scp -q -C ${SOURCE}/artifacts.jar ${USER}@frs.sourceforge.net:frs/${DESTINATION}
	expect eof
	wait
	spawn scp -q -C -r ${SOURCE}/content.xml ${USER}@frs.sourceforge.net:frs/${DESTINATION}
	expect eof
	wait
	spawn scp -q -C ${SOURCE}/artifacts.xml ${USER}@frs.sourceforge.net:frs/${DESTINATION}
	expect eof
	wait
	spawn scp -q -C -r ${SOURCE}/features ${USER}@frs.sourceforge.net:frs/${DESTINATION}
	expect eof
	wait
	spawn scp -q -C -r ${SOURCE}/plugins ${USER}@frs.sourceforge.net:frs/${DESTINATION}
	expect eof
	wait
END

